<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>FastTracker II Clone</title>
    <style>
        /* zero-chrome, black background */
        html,body{height:100%;margin:0;background:#000;display:flex;align-items:center;justify-content:center}
        /* ensure pixel-perfect upscaling */
        #canvas{image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}
    </style>
</head>
<body>
    <canvas id="canvas" width="632" height="400"></canvas>

    <script>
        /* minimal Module definition for the Emscripten runtime + FT2 mouse fixes */
        const canvas   = document.getElementById('canvas');
        var Module   = {
            canvas: canvas,
            lastMouseEvent: null,
            /* stubs so the runtime doesnâ€™t complain */
            setStatus:            function() {},
            monitorRunDependencies:function() {},
            print:               function(t){console.log(t)},
            printErr:            function(t){console.error(t)},
            postRun:             []
        };

        /* feed mouse events to C code (see ft2_mouse.c EM_ASM blocks) */
        function storeEvt(e){ Module.lastMouseEvent = e; }
        ['mousemove','mousedown','mouseup','click'].forEach(evt=>canvas.addEventListener(evt,storeEvt));
        document.addEventListener('mousemove',storeEvt); // when pointer leaves canvas
        canvas.addEventListener('click',()=>canvas.focus());
    </script>

    {{{ SCRIPT }}}
</body>
</html> 