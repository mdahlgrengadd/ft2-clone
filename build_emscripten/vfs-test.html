<!DOCTYPE html>
<html>
<head>
    <title>VFS Test - FastTracker II Clone</title>
</head>
<body>
    <h1>VFS Test</h1>
    <div id="output"></div>
    
    <script>
        // Test VFS structure after the module loads
        function testVFS() {
            try {
                const output = document.getElementById('output');
                
                // Check if /home/web_user exists
                if (FS.analyzePath('/home/web_user').exists) {
                    output.innerHTML += '<p>✅ /home/web_user exists</p>';
                    
                    // List contents of /home/web_user
                    const contents = FS.readdir('/home/web_user');
                    output.innerHTML += '<p>Contents of /home/web_user: ' + contents.join(', ') + '</p>';
                    
                    // Check if modules directory exists
                    if (FS.analyzePath('/home/web_user/modules').exists) {
                        output.innerHTML += '<p>✅ /home/web_user/modules exists</p>';
                        
                        // List contents of modules directory
                        const moduleContents = FS.readdir('/home/web_user/modules');
                        output.innerHTML += '<p>Contents of /home/web_user/modules: ' + moduleContents.join(', ') + '</p>';
                        
                        // Check for db_cydon.xm specifically
                        if (FS.analyzePath('/home/web_user/modules/db_cydon.xm').exists) {
                            output.innerHTML += '<p>✅ db_cydon.xm found at /home/web_user/modules/db_cydon.xm</p>';
                            
                            // Get file stats
                            const stats = FS.stat('/home/web_user/modules/db_cydon.xm');
                            output.innerHTML += '<p>File size: ' + stats.size + ' bytes</p>';
                        } else {
                            output.innerHTML += '<p>❌ db_cydon.xm not found</p>';
                        }
                    } else {
                        output.innerHTML += '<p>❌ /home/web_user/modules does not exist</p>';
                    }
                } else {
                    output.innerHTML += '<p>❌ /home/web_user does not exist</p>';
                }
            } catch (e) {
                document.getElementById('output').innerHTML += '<p>❌ Error: ' + e.message + '</p>';
            }
        }
        
        // Wait for the Module to be ready
        if (typeof Module !== 'undefined' && Module.onRuntimeInitialized) {
            Module.onRuntimeInitialized = testVFS;
        } else {
            // Fallback: wait for module to load
            setTimeout(testVFS, 2000);
        }
    </script>
</body>
</html>
